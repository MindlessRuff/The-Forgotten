[gd_scene load_steps=29 format=3 uid="uid://b71gis6vgkvkg"]

[ext_resource type="Script" path="res://scripts/level.gd" id="1_6u7sh"]
[ext_resource type="PackedScene" uid="uid://bob88w6sefucj" path="res://scenes/Environment.tscn" id="1_halep"]
[ext_resource type="PackedScene" uid="uid://cyj8triea8w13" path="res://scenes/Crowbar.tscn" id="3_ax4cu"]
[ext_resource type="PackedScene" uid="uid://c7u77qm7btd2s" path="res://scenes/CryoBed.tscn" id="4_0fems"]
[ext_resource type="PackedScene" uid="uid://ch0016cku2p02" path="res://scenes/Light.tscn" id="4_7cj7q"]
[ext_resource type="Texture2D" uid="uid://bs1j2sjkfkrod" path="res://art/environment/lights/wall light2.png" id="5_wy17f"]
[ext_resource type="Texture2D" uid="uid://cp2ay5o5a8tbb" path="res://art/environment/lights/LightCone_resized.png" id="6_g4f4m"]
[ext_resource type="Texture2D" uid="uid://c1n1chkpvoqhi" path="res://art/item/RifleItem.png" id="7_dy02q"]
[ext_resource type="Texture2D" uid="uid://vr4ybpyhhe04" path="res://art/environment/power core.png" id="11_krgf7"]
[ext_resource type="PackedScene" uid="uid://byo7nlby2q2i0" path="res://scenes/SpaceRoach.tscn" id="13_a1bri"]
[ext_resource type="PackedScene" uid="uid://d2eli84d2uqkm" path="res://scenes/InsaneCrew.tscn" id="16_ee52r"]
[ext_resource type="PackedScene" uid="uid://d8noqp0xbebg" path="res://scenes/CryoMachine.tscn" id="16_idydh"]
[ext_resource type="PackedScene" uid="uid://bo3acd3y8ucuy" path="res://scenes/Eus.tscn" id="17_7u0ol"]
[ext_resource type="Shader" path="res://shaders/space.gdshader" id="18_ghgnd"]

[sub_resource type="AtlasTexture" id="AtlasTexture_ofc0v"]
atlas = ExtResource("11_krgf7")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_qtmfy"]
atlas = ExtResource("11_krgf7")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_p3mgj"]
atlas = ExtResource("11_krgf7")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_vl7la"]
atlas = ExtResource("11_krgf7")
region = Rect2(256, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_y8twb"]
atlas = ExtResource("11_krgf7")
region = Rect2(320, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_obndp"]
atlas = ExtResource("11_krgf7")
region = Rect2(384, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_fjye5"]
atlas = ExtResource("11_krgf7")
region = Rect2(448, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_tqwcn"]
atlas = ExtResource("11_krgf7")
region = Rect2(512, 0, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_tjdlj"]
animations = [{
"frames": [{
"duration": 4.0,
"texture": SubResource("AtlasTexture_ofc0v")
}, {
"duration": 2.0,
"texture": SubResource("AtlasTexture_qtmfy")
}, {
"duration": 2.0,
"texture": SubResource("AtlasTexture_p3mgj")
}, {
"duration": 2.0,
"texture": SubResource("AtlasTexture_vl7la")
}, {
"duration": 4.0,
"texture": SubResource("AtlasTexture_y8twb")
}, {
"duration": 2.0,
"texture": SubResource("AtlasTexture_obndp")
}, {
"duration": 2.0,
"texture": SubResource("AtlasTexture_fjye5")
}, {
"duration": 2.0,
"texture": SubResource("AtlasTexture_tqwcn")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="SegmentShape2D" id="SegmentShape2D_xjm62"]
b = Vector2(0, 100)

[sub_resource type="Animation" id="Animation_2qwia"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimationPlayer/CanvasLayer/ColorRect:self_modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("AnimationPlayer/CanvasLayer/ColorRect:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="Animation" id="Animation_u5hk3"]
resource_name = "fade_in"
length = 3.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimationPlayer/CanvasLayer/ColorRect:self_modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 3),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("AnimationPlayer/CanvasLayer/ColorRect:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 3),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_pgkf5"]
_data = {
"RESET": SubResource("Animation_2qwia"),
"fade_in": SubResource("Animation_u5hk3")
}

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ilnn4"]
shader = ExtResource("18_ghgnd")
shader_parameter/iterations = 17
shader_parameter/formuparam = 0.53
shader_parameter/volsteps = 10
shader_parameter/stepsize = 0.1
shader_parameter/zoom = 0.8
shader_parameter/tile = 0.85
shader_parameter/speed = 0.001
shader_parameter/brightness = 0.0015
shader_parameter/darkmatter = 0.3
shader_parameter/distfading = 0.73
shader_parameter/saturation = 0.85
shader_parameter/rotation = null
shader_parameter/colorampMix = 0.5
shader_parameter/isColoramp = null

[node name="Main" type="Node2D"]
script = ExtResource("1_6u7sh")

[node name="HUD" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="TextureProgressBar" type="TextureProgressBar" parent="HUD"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="PlayerSpawnLocation" type="Marker2D" parent="."]
position = Vector2(-657, -27)

[node name="Environment" parent="." instance=ExtResource("1_halep")]

[node name="RifleItem" type="Sprite2D" parent="Environment"]
z_index = 3

[node name="Crowbar" parent="Environment" instance=ExtResource("3_ax4cu")]
position = Vector2(-601, -231)

[node name="CryoBed" parent="Environment" instance=ExtResource("4_0fems")]
position = Vector2(-706, -48)
rotation = -1.57079

[node name="CryoBed2" parent="Environment" instance=ExtResource("4_0fems")]
position = Vector2(-706, 16)
rotation = -1.57079

[node name="CryoBed3" parent="Environment" instance=ExtResource("4_0fems")]
position = Vector2(-605, 16)
rotation = -4.71238

[node name="CryoBed4" parent="Environment" instance=ExtResource("4_0fems")]
position = Vector2(-606, -16)
rotation = -4.71238

[node name="CryoBed5" parent="Environment" instance=ExtResource("4_0fems")]
position = Vector2(-607, -48)
rotation = -4.71238

[node name="CryoMachine" parent="Environment" instance=ExtResource("16_idydh")]
position = Vector2(-709, -100)

[node name="PowerCore" type="AnimatedSprite2D" parent="Environment"]
position = Vector2(-1216, 0)
sprite_frames = SubResource("SpriteFrames_tjdlj")
autoplay = "default"
frame_progress = 0.321637

[node name="RifleItem2" type="Sprite2D" parent="Environment"]
z_index = 3
position = Vector2(-465, -198)
rotation = 1.0472
texture = ExtResource("7_dy02q")

[node name="DarknessLevel" type="CanvasModulate" parent="." groups=["Darkness"]]
color = Color(0, 0, 0, 1)

[node name="Lights" type="Node2D" parent="."]
position = Vector2(-1045, -100)

[node name="CryoLights" type="Node2D" parent="Lights"]

[node name="Light3" parent="Lights/CryoLights" groups=["Cryo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(365, -138)
rotation = 0.785397
light_texture = ExtResource("6_g4f4m")

[node name="Light4" parent="Lights/CryoLights" groups=["Cryo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(459, -80)
rotation = 3.14159
light_texture = ExtResource("6_g4f4m")

[node name="Light5" parent="Lights/CryoLights" groups=["Cryo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(421, -178)
rotation = 1.57079
light_texture = ExtResource("6_g4f4m")

[node name="Light" parent="Lights/CryoLights" groups=["Cryo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(319, 67)
light_texture = ExtResource("6_g4f4m")

[node name="Light2" parent="Lights/CryoLights" groups=["Cryo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(459, 68)
rotation = 3.14159
light_texture = ExtResource("6_g4f4m")

[node name="Light6" parent="Lights/CryoLights" groups=["Cryo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(459, -8)
rotation = -3.14159
light_texture = ExtResource("6_g4f4m")

[node name="CeilingLight7" parent="Lights/CryoLights" groups=["Cryo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(392, -70)
texture = null
light_texture = ExtResource("5_wy17f")

[node name="CeilingLight8" parent="Lights/CryoLights" groups=["Cryo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(392, 73)
texture = null
light_texture = ExtResource("5_wy17f")

[node name="CeilingLight9" parent="Lights/CryoLights" groups=["Cryo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(392, -3)
texture = null
light_texture = ExtResource("5_wy17f")

[node name="HallwayLights" type="Node2D" parent="Lights"]

[node name="Light6" parent="Lights/HallwayLights" groups=["Hallway_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(479, -3)
light_texture = ExtResource("6_g4f4m")

[node name="Light7" parent="Lights/HallwayLights" groups=["Hallway_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(479, -85)
light_texture = ExtResource("6_g4f4m")

[node name="Light8" parent="Lights/HallwayLights" groups=["Hallway_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(574, -9)
rotation = 2.35619
light_texture = ExtResource("6_g4f4m")

[node name="Light9" parent="Lights/HallwayLights" groups=["Hallway_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(458, 122)
rotation = 0.785397
light_texture = ExtResource("6_g4f4m")

[node name="Light10" parent="Lights/HallwayLights" groups=["Hallway_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(560, 222)
rotation = -2.35619
light_texture = ExtResource("6_g4f4m")

[node name="Light11" parent="Lights/HallwayLights" groups=["Hallway_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(479, 68)
light_texture = ExtResource("6_g4f4m")

[node name="Light12" parent="Lights/HallwayLights" groups=["Hallway_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(319, 157)
light_texture = ExtResource("6_g4f4m")

[node name="Light13" parent="Lights/HallwayLights" groups=["Hallway_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(319, 267)
light_texture = ExtResource("6_g4f4m")

[node name="Light16" parent="Lights/HallwayLights" groups=["Hallway_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(454, 410)
rotation = -1.57078
light_texture = ExtResource("6_g4f4m")

[node name="Light17" parent="Lights/HallwayLights" groups=["Hallway_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(516, 410)
rotation = -1.57078
light_texture = ExtResource("6_g4f4m")

[node name="Light18" parent="Lights/HallwayLights" groups=["Hallway_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(523, 267)
rotation = -3.14158
light_texture = ExtResource("6_g4f4m")

[node name="CeilingLight" parent="Lights/HallwayLights" groups=["Hallway_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(438, 262)
texture = null
light_texture = ExtResource("5_wy17f")

[node name="CeilingLights" type="Node2D" parent="Lights"]

[node name="CargoLights" type="Node2D" parent="Lights"]

[node name="Light2" parent="Lights/CargoLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(82, 177)
texture = null
light_texture = ExtResource("5_wy17f")

[node name="Light3" parent="Lights/CargoLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(82, 100)
texture = null
light_texture = ExtResource("5_wy17f")

[node name="Light5" parent="Lights/CargoLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(82, 0)
texture = null
light_texture = ExtResource("5_wy17f")

[node name="Light6" parent="Lights/CargoLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(82, 262)
texture = null
light_texture = ExtResource("5_wy17f")

[node name="Light7" parent="Lights/CargoLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(177, 0)
texture = null
light_texture = ExtResource("5_wy17f")

[node name="Light8" parent="Lights/CargoLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(177, 100)
texture = null
light_texture = ExtResource("5_wy17f")

[node name="Light9" parent="Lights/CargoLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(177, 177)
texture = null
light_texture = ExtResource("5_wy17f")

[node name="Light10" parent="Lights/CargoLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(177, 262)
texture = null
light_texture = ExtResource("5_wy17f")

[node name="WallLights" type="Node2D" parent="Lights/CargoLights"]

[node name="Light19" parent="Lights/CargoLights/WallLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(299, 157)
rotation = -3.14158
light_texture = ExtResource("6_g4f4m")

[node name="Light20" parent="Lights/CargoLights/WallLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(299, 267)
rotation = -3.14158
light_texture = ExtResource("6_g4f4m")

[node name="Light21" parent="Lights/CargoLights/WallLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(299, 68)
rotation = -3.14158
light_texture = ExtResource("6_g4f4m")

[node name="Light22" parent="Lights/CargoLights/WallLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(-65, 100)
rotation = 1.77701e-05
light_texture = ExtResource("6_g4f4m")

[node name="Light23" parent="Lights/CargoLights/WallLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(-65, 196)
rotation = 1.77701e-05
light_texture = ExtResource("6_g4f4m")

[node name="Light24" parent="Lights/CargoLights/WallLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(-4, 257)
rotation = -0.785379
light_texture = ExtResource("6_g4f4m")

[node name="Light25" parent="Lights/CargoLights/WallLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(46, 314)
rotation = -1.57078
light_texture = ExtResource("6_g4f4m")

[node name="Light26" parent="Lights/CargoLights/WallLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(92, 314)
rotation = -1.57078
light_texture = ExtResource("6_g4f4m")

[node name="Light27" parent="Lights/CargoLights/WallLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(-81, 125)
rotation = -3.14157
light_texture = ExtResource("6_g4f4m")

[node name="Light28" parent="Lights/CargoLights/WallLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(-81, 171)
rotation = -3.14157
light_texture = ExtResource("6_g4f4m")

[node name="Light29" parent="Lights/CargoLights/WallLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(-81, 75)
rotation = -3.14157
light_texture = ExtResource("6_g4f4m")

[node name="Light30" parent="Lights/CargoLights/WallLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(-81, 29)
rotation = -3.14157
light_texture = ExtResource("6_g4f4m")

[node name="Light31" parent="Lights/CargoLights/WallLights" groups=["Cargo_Light"] instance=ExtResource("4_7cj7q")]
position = Vector2(-65, 4)
light_texture = ExtResource("6_g4f4m")

[node name="ExitCryo" type="Area2D" parent="Lights"]
position = Vector2(475, -84)
collision_layer = 2
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Lights/ExitCryo"]
shape = SubResource("SegmentShape2D_xjm62")

[node name="EnterCryo" type="Area2D" parent="Lights"]
position = Vector2(463, -84)
collision_layer = 2
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Lights/EnterCryo"]
shape = SubResource("SegmentShape2D_xjm62")

[node name="EnterCargo" type="Area2D" parent="Lights"]
position = Vector2(303, 172)
collision_layer = 2
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Lights/EnterCargo"]
position = Vector2(0, -10)
shape = SubResource("SegmentShape2D_xjm62")

[node name="ExitCargo" type="Area2D" parent="Lights"]
position = Vector2(315, 172)
collision_layer = 2
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Lights/ExitCargo"]
position = Vector2(0, -10)
shape = SubResource("SegmentShape2D_xjm62")

[node name="Entities" type="Node2D" parent="."]

[node name="Eus" parent="Entities" instance=ExtResource("17_7u0ol")]
position = Vector2(-540, -289)
rotation = 3.14159

[node name="InsaneCrew" parent="Entities" instance=ExtResource("16_ee52r")]
position = Vector2(-653, -252)

[node name="SpaceRoach" parent="Entities" groups=["Roach"] instance=ExtResource("13_a1bri")]
position = Vector2(-879, -89)

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_pgkf5")
}

[node name="CanvasLayer" type="CanvasLayer" parent="AnimationPlayer"]

[node name="ColorRect" type="ColorRect" parent="AnimationPlayer/CanvasLayer"]
offset_right = 320.0
offset_bottom = 180.0
color = Color(0, 0, 0, 1)

[node name="CanvasLayer" type="CanvasLayer" parent="."]
layer = -8

[node name="ColorRect" type="ColorRect" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_ilnn4")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[connection signal="body_exited" from="Lights/ExitCryo" to="." method="_on_exit_cryo_body_exited"]
[connection signal="body_exited" from="Lights/EnterCryo" to="." method="_on_enter_cryo_body_exited"]
[connection signal="body_exited" from="Lights/EnterCargo" to="." method="_on_enter_cargo_body_exited"]
[connection signal="body_exited" from="Lights/ExitCargo" to="." method="_on_exit_cargo_body_exited"]
